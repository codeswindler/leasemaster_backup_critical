import{c as E,b as Oe,a as _e,d as T,f as G,j as s,C as le,z as re,A as ce,x as o,E as oe,G as de,U as Ge,B as Xe,K as m,I as M,a4 as me,as as Ve,at as Qe,y as Je,S as ue,r as pe,s as he,v as xe,w as k,a6 as We,a2 as Ye,aC as Ze,a9 as es,a3 as ge,D as ss,aj as ts,g as as,h as ns,i as is,aJ as ls,ar as rs,a0 as g,q as X}from"./index-D3-Phv8z.js";import{r as u}from"./vendor-BBpupLJz.js";import{T as cs,a as os,b as je}from"./tabs-CPhPIXkL.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=E("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=E("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=E("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=E("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=E("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=E("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);function vs(){const[N,fe]=u.useState("tenants"),[v,S]=u.useState([]),[F,ye]=u.useState(!1),[I,V]=u.useState(""),[L,Q]=u.useState(""),[l,J]=u.useState("email"),[W,H]=u.useState(""),[q,U]=u.useState(""),[b,A]=u.useState(""),[R,B]=u.useState([]),j=u.useRef(null),[ve,Y]=u.useState(!1),[f,w]=u.useState({id:"",name:"",channel:"sms",subject:"",content:"",isSystem:!1}),{selectedPropertyId:d,selectedLandlordId:h}=Oe(),{toast:p}=_e(),{data:Ne=[]}=T({queryKey:["/api/tenants",d,h],queryFn:async()=>{const e=new URLSearchParams;d&&e.append("propertyId",d),h&&e.append("landlordId",h);const t=`/api/tenants${e.toString()?`?${e}`:""}`;return await(await g("GET",t)).json()}}),{data:Se=[]}=T({queryKey:["/api/landlords"],queryFn:async()=>await(await g("GET","/api/landlords")).json()}),{data:be=[]}=T({queryKey:["/api/units",d,h],queryFn:async()=>{const e=new URLSearchParams;d&&e.append("propertyId",d),h&&e.append("landlordId",h);const t=`/api/units${e.toString()?`?${e}`:""}`;return await(await g("GET",t)).json()}}),{data:we=[]}=T({queryKey:["/api/leases",d,h],queryFn:async()=>{const e=new URLSearchParams;d&&e.append("propertyId",d),h&&e.append("landlordId",h);const t=`/api/leases${e.toString()?`?${e}`:""}`;return await(await g("GET",t)).json()}}),{data:Ce=[]}=T({queryKey:["/api/properties",h,d],queryFn:async()=>{const e=new URLSearchParams;h&&e.append("landlordId",h),d&&e.append("propertyId",d);const t=`/api/properties${e.toString()?`?${e}`:""}`;return await(await g("GET",t)).json()}}),{data:Te=[]}=T({queryKey:["/api/message-templates"],queryFn:async()=>await(await g("GET","/api/message-templates")).json()}),Me=Ne.map(e=>{const t=we.find(i=>i.tenantId===e.id&&i.status==="active"),a=be.find(i=>i.id===t?.unitId);return{id:e.id,name:e.fullName||e.full_name,email:e.email,phone:e.phone,unit:a?.unitNumber||"No unit"}}).filter(e=>e.name&&(e.email||e.phone)),ke=Se.map(e=>{const t=Ce.filter(n=>n.landlord_id===e.id),a=e.phone??(t.length>0?t[0].landlord_phone:null),i=e.fullName||e.full_name||e.username;return{id:e.id,name:i,email:e.username,phone:a,properties:t.length}}).filter(e=>e.name),z=N==="tenants"?Me:ke,P=Te,Ee=(e,t)=>{S(t?[...v,e]:v.filter(a=>a!==e))},Fe=()=>{S(z.map(e=>e.id))},qe=()=>{S([])},Ie=e=>{const t=e.channel??"sms";(t==="email"||t==="sms"||t==="both")&&J(t),H(e.subject||"");const a=e.content||e.message||"";U(a),A(a)};u.useEffect(()=>{j.current&&j.current.innerHTML!==b&&(j.current.innerHTML=b)},[b]);const K=()=>{j.current&&A(j.current.innerHTML)},$=e=>{j.current&&(j.current.focus(),document.execCommand(e),K())},Le=()=>{if(!j.current)return;const e=window.prompt("Enter link URL");e&&(j.current.focus(),document.execCommand("createLink",!1,e),K())},Z=e=>{const t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").trim()},Re=e=>{const t=Array.from(e.target.files||[]);if(!t.length)return;if([...R,...t].reduce((i,n)=>i+n.size,0)>10*1024*1024){p({title:"Attachment too large",description:"Total attachments must be 10MB or less.",variant:"destructive"});return}B(i=>[...i,...t]),e.target.value=""},ze=e=>{B(t=>t.filter((a,i)=>i!==e))},ee=`@£$¥èéùìòÇ
Øø\rÅåΔ_ΦΓΛΩΠΨΣΘΞ\x1BÆæßÉ !"#¤%&'()*+,-./0123456789:;<=>?¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzäöñüà`,se="^{}\\[~]|€",Pe=e=>{for(const t of e)if(!ee.includes(t)&&!se.includes(t))return"UCS-2";return"GSM-7"},$e=e=>{let t=0;for(const a of e)ee.includes(a)?t+=1:se.includes(a)?t+=2:t+=1;return t},O=(e=>{if(!e)return{encoding:"GSM-7",length:0,segments:0};const t=Pe(e);if(t==="UCS-2"){const n=e.length,x=n<=70?70:67;return{encoding:t,length:n,segments:Math.ceil(n/x)}}const a=$e(e),i=a<=160?160:153;return{encoding:t,length:a,segments:Math.ceil(a/i)}})(q),te=l==="email"||l==="both",ae=l==="sms"||l==="both",De=Z(b),He=!te||De.length>0,Ue=!ae||q.trim().length>0,ne=()=>{w({id:"",name:"",channel:"sms",subject:"",content:"",isSystem:!1})},ie=G({mutationFn:async e=>e.id?await(await g("PUT",`/api/message-templates/${e.id}`,e)).json():await(await g("POST","/api/message-templates",e)).json(),onSuccess:()=>{X.invalidateQueries({queryKey:["/api/message-templates"]}),p({title:"Template saved"}),ne()},onError:e=>{p({title:"Template error",description:e.message||"Failed to save template.",variant:"destructive"})}}),Ae=G({mutationFn:async e=>(await g("DELETE",`/api/message-templates/${e}`)).ok,onSuccess:()=>{X.invalidateQueries({queryKey:["/api/message-templates"]}),p({title:"Template deleted"})},onError:e=>{p({title:"Delete failed",description:e.message||"Failed to delete template.",variant:"destructive"})}}),Be=e=>{w({id:e.id,name:e.name||"",channel:e.channel||"sms",subject:e.subject||"",content:e.content||"",isSystem:!!(e.is_system??e.isSystem)}),Y(!0)},_=G({mutationFn:async e=>{const t=[],a=async i=>{const n=new FormData;Object.entries(i).forEach(([r,c])=>{c!=null&&n.append(r,String(c))}),R.forEach(r=>{n.append("attachments[]",r)});const x=await fetch("/api/send-email",{method:"POST",body:n,credentials:"include"});if(!x.ok){const r=await x.text()||x.statusText;throw new Error(r)}return await x.json()};if(F){const i=e.type==="both"?["email","sms"]:[e.type];for(const n of i){const x=n==="email"?I:L;if(!x){t.push({channel:n,recipient:"Manual",success:!1,error:`Missing ${n} recipient`});continue}const r=n==="email"?"/api/send-email":"/api/send-sms",c={recipientType:N==="tenants"?"tenant":"landlord",recipientId:null,recipientName:"Manual",propertyId:d||null};n==="email"?(c.to=x,c.toName="Manual",c.subject=e.subject,c.messageHtml=e.emailHtml,c.isHtml=!0):(c.mobile=x,c.message=e.message);try{const C=n==="email"?await a(c):await(await g("POST",r,c)).json();t.push({channel:n,recipient:"Manual",success:C.success,error:C.error})}catch(C){t.push({channel:n,recipient:"Manual",success:!1,error:C.message})}}return t}for(const i of e.recipients){const n=z.find(r=>r.id===i);if(!n)continue;const x=e.type==="both"?["email","sms"]:[e.type];for(const r of x){const c=r==="email"?n.email:n.phone;if(!c){t.push({channel:r,recipient:n.name,success:!1,error:`Missing ${r} contact`});continue}const C=r==="email"?"/api/send-email":"/api/send-sms",y={recipientType:N==="tenants"?"tenant":"landlord",recipientId:i,recipientName:n.name,propertyId:d||null};r==="email"?(y.to=c,y.toName=n.name,y.subject=e.subject,y.messageHtml=e.emailHtml,y.isHtml=!0):(y.mobile=c,y.message=e.message);try{const D=r==="email"?await a(y):await(await g("POST",C,y)).json();t.push({channel:r,recipient:n.name,success:D.success,error:D.error})}catch(D){t.push({channel:r,recipient:n.name,success:!1,error:D.message})}}}return t},onSuccess:e=>{if(e.length===0){p({title:"No Recipients",description:"No valid recipients were selected.",variant:"destructive"});return}const t=e.filter(i=>i.success).length,a=e.filter(i=>!i.success).length;X.invalidateQueries({queryKey:["/api/message-recipients"]}),a===0?p({title:"Messages Sent",description:`Successfully sent ${t} message(s).`}):t>0?p({title:"Partial Success",description:`Sent ${t} message(s), ${a} failed.`,variant:"destructive"}):p({title:"Send Failed",description:"All messages failed to send.",variant:"destructive"}),S([]),H(""),U(""),A(""),B([]),V(""),Q("")},onError:e=>{p({title:"Error",description:e.message||"Failed to send messages.",variant:"destructive"})}}),Ke=()=>{const e=l==="email"||l==="both",t=l==="sms"||l==="both",a=Z(b);if(!(e&&!a)&&!(t&&!q.trim())){if(F){if(e&&!I.trim()){p({title:"Missing Email",description:"Enter a recipient email.",variant:"destructive"});return}if(t&&!L.trim()){p({title:"Missing Phone",description:"Enter a recipient phone number.",variant:"destructive"});return}}else if(v.length===0){p({title:"No Recipients",description:"Select at least one recipient.",variant:"destructive"});return}_.mutate({recipients:v,type:l,subject:W,message:q,emailHtml:b})}};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold","data-testid":"compose-title",children:"Compose Message"}),s.jsx("p",{className:"text-muted-foreground",children:"Send messages to tenants or landlords via email and SMS"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs(le,{children:[s.jsxs(re,{children:[s.jsxs(ce,{className:"flex items-center justify-between",children:["Recipients",s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{variant:"outline",size:"sm",onClick:Fe,"data-testid":"button-select-all",children:"All"}),s.jsx(o,{variant:"outline",size:"sm",onClick:qe,"data-testid":"button-select-none",children:"None"})]})]}),s.jsx(oe,{children:"Select recipients to send message to"})]}),s.jsxs(de,{className:"space-y-4",children:[s.jsx(cs,{value:N,onValueChange:e=>{fe(e),S([])},children:s.jsxs(os,{className:"grid w-full grid-cols-2",children:[s.jsxs(je,{value:"tenants",className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Tenants"]}),s.jsxs(je,{value:"landlords",className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"h-4 w-4"}),"Landlords"]})]})}),s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:F?s.jsxs("div",{className:"space-y-3",children:[(l==="email"||l==="both")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"manual-email",children:"Recipient Email"}),s.jsx(M,{id:"manual-email",type:"email",placeholder:"recipient@example.com",value:I,onChange:e=>V(e.target.value),"data-testid":"input-manual-email"})]}),(l==="sms"||l==="both")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"manual-phone",children:"Recipient Phone"}),s.jsx(M,{id:"manual-phone",placeholder:"+2547XXXXXXXX",value:L,onChange:e=>Q(e.target.value),"data-testid":"input-manual-phone"})]})]}):z.length===0?s.jsxs("p",{className:"text-sm text-muted-foreground text-center py-4",children:["No ",N," found"]}):z.map(e=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(me,{id:e.id,checked:v.includes(e.id),onCheckedChange:t=>Ee(e.id,!!t),"data-testid":`checkbox-${N}-${e.id}`}),s.jsx(Ve,{className:"h-8 w-8",children:s.jsx(Qe,{className:"text-xs",children:e.name.split(" ").map(t=>t[0]).join("").slice(0,2)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:e.name}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:N==="tenants"?e.unit:`${e.properties} properties`})]})]},e.id))}),v.length>0&&s.jsx("div",{className:"pt-3 border-t",children:s.jsxs(Je,{variant:"secondary",children:[v.length," selected"]})}),s.jsx("div",{className:"pt-3 border-t",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(me,{id:"manual-recipient",checked:F,onCheckedChange:e=>{ye(!!e),S([])}}),s.jsx(m,{htmlFor:"manual-recipient",children:"Manual recipient"})]})})]})]}),s.jsxs(le,{className:"lg:col-span-2",children:[s.jsxs(re,{children:[s.jsx(ce,{children:"Message Details"}),s.jsx(oe,{children:"Compose your message"})]}),s.jsxs(de,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{children:"Message Type"}),s.jsxs(ue,{value:l,onValueChange:e=>J(e),children:[s.jsx(pe,{"data-testid":"select-message-type",children:s.jsx(he,{})}),s.jsxs(xe,{children:[s.jsx(k,{value:"email",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(We,{className:"h-4 w-4"}),"Email Only"]})}),s.jsx(k,{value:"sms",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"SMS Only"]})}),s.jsx(k,{value:"both",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Email & SMS"]})})]})]})]}),(l==="email"||l==="both")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"subject",children:"Subject"}),s.jsx(M,{id:"subject",placeholder:"Enter email subject",value:W,onChange:e=>H(e.target.value),"data-testid":"input-subject"})]}),(l==="email"||l==="both")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{children:"Email Content"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 border rounded-md p-2 bg-muted/20",children:[s.jsx(o,{type:"button",variant:"ghost",size:"icon",onClick:()=>$("bold"),children:s.jsx(ds,{className:"h-4 w-4"})}),s.jsx(o,{type:"button",variant:"ghost",size:"icon",onClick:()=>$("italic"),children:s.jsx(ms,{className:"h-4 w-4"})}),s.jsx(o,{type:"button",variant:"ghost",size:"icon",onClick:()=>$("underline"),children:s.jsx(xs,{className:"h-4 w-4"})}),s.jsx(o,{type:"button",variant:"ghost",size:"icon",onClick:()=>$("insertUnorderedList"),children:s.jsx(ps,{className:"h-4 w-4"})}),s.jsx(o,{type:"button",variant:"ghost",size:"icon",onClick:Le,children:s.jsx(us,{className:"h-4 w-4"})})]}),s.jsx("div",{ref:j,contentEditable:!0,onInput:K,className:"min-h-[180px] rounded-md border px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","data-testid":"rich-email-editor"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Use placeholders: ","{tenant_name}",", ","{unit}",", ","{amount}",", ","{due_date}"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"email-attachments",children:"Attachments (max 10MB)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M,{id:"email-attachments",type:"file",multiple:!0,onChange:Re,"data-testid":"input-email-attachments"}),s.jsx(hs,{className:"h-4 w-4 text-muted-foreground"})]}),R.length>0&&s.jsx("div",{className:"space-y-2",children:R.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between rounded-md border px-3 py-2 text-sm",children:[s.jsxs("span",{className:"truncate",children:[e.name," • ",(e.size/1024/1024).toFixed(2)," MB"]}),s.jsx(o,{type:"button",variant:"ghost",size:"icon",onClick:()=>ze(t),children:s.jsx(es,{className:"h-4 w-4"})})]},`${e.name}-${t}`))})]})]}),(l==="sms"||l==="both")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"message",children:"SMS Message"}),s.jsx(ge,{id:"message",placeholder:"Type your SMS here...",value:q,onChange:e=>U(e.target.value),rows:6,"data-testid":"textarea-message"}),s.jsxs("div",{className:"flex flex-wrap items-center justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:[O.length," chars • ",O.segments," SMS • ",O.encoding]}),s.jsxs("span",{children:["Use placeholders: ","{tenant_name}",", ","{unit}",", ","{amount}",", ","{due_date}"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(m,{children:"Quick Templates"}),s.jsxs(ss,{open:ve,onOpenChange:Y,children:[s.jsx(ts,{asChild:!0,children:s.jsx(o,{variant:"outline",size:"sm",children:"Manage Templates"})}),s.jsxs(as,{className:"max-w-2xl",children:[s.jsx(ns,{children:s.jsx(is,{children:f.id?"Edit Template":"New Template"})}),s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"template-name",children:"Name"}),s.jsx(M,{id:"template-name",value:f.name,onChange:e=>w(t=>({...t,name:e.target.value})),placeholder:"Template name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"template-channel",children:"Channel"}),s.jsxs(ue,{value:f.channel,onValueChange:e=>w(t=>({...t,channel:e})),children:[s.jsx(pe,{id:"template-channel",children:s.jsx(he,{})}),s.jsxs(xe,{children:[s.jsx(k,{value:"sms",children:"SMS"}),s.jsx(k,{value:"email",children:"Email"}),s.jsx(k,{value:"both",children:"Both"})]})]})]})]}),(f.channel==="email"||f.channel==="both")&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"template-subject",children:"Subject"}),s.jsx(M,{id:"template-subject",value:f.subject,onChange:e=>w(t=>({...t,subject:e.target.value})),placeholder:"Subject (email only)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{htmlFor:"template-content",children:"Content"}),s.jsx(ge,{id:"template-content",value:f.content,onChange:e=>w(t=>({...t,content:e.target.value})),rows:6})]})]}),s.jsxs(ls,{className:"flex items-center justify-between",children:[s.jsx(o,{variant:"outline",onClick:ne,children:"Clear"}),s.jsx(o,{onClick:()=>ie.mutate(f),disabled:!f.name.trim()||!f.content.trim(),children:ie.isPending?"Saving...":"Save Template"})]}),s.jsxs("div",{className:"border-t pt-4 space-y-3",children:[s.jsx(m,{children:"Existing Templates"}),P.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No templates yet."}):s.jsx("div",{className:"space-y-2",children:P.map(e=>s.jsxs("div",{className:"flex items-center justify-between rounded border px-3 py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:e.name}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:e.channel})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{variant:"outline",size:"sm",onClick:()=>Be(e),children:"Edit"}),s.jsx(o,{variant:"destructive",size:"sm",onClick:()=>Ae.mutate(e.id),children:"Delete"})]})]},e.id))})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:P.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No templates available."}):P.map(e=>s.jsx(o,{variant:"outline",size:"sm",onClick:()=>Ie(e),"data-testid":`button-template-${e.id}`,children:e.name},e.id))})]}),s.jsx("div",{className:"flex justify-end gap-2 pt-4 border-t",children:s.jsxs(o,{onClick:Ke,disabled:!He||!Ue||_.isPending||(F?te&&!I.trim()||ae&&!L.trim():v.length===0),"data-testid":"button-send-message",children:[s.jsx(rs,{className:"h-4 w-4 mr-2"}),_.isPending?"Sending...":"Send Message"]})})]})]})]})]})}export{vs as MessagingCompose};
