import{b as N,az as b,d,j as e,C as o,z as x,A as h,aC as $,E as m,y as f,G as j,a6 as w,aa as C,ab as T,ac as p,ad as l,ae as v,af as r,a0 as u}from"./index-D3-Phv8z.js";import"./vendor-BBpupLJz.js";function B(){const{selectedPropertyId:s,selectedLandlordId:n}=N(),t=b(0),i=b(1),{data:g}=d({queryKey:["/api/sms-balance",s],queryFn:async()=>{const a=new URLSearchParams;return s&&a.append("propertyId",s),await(await u("GET",`/api/sms-balance${a.toString()?`?${a}`:""}`)).json()}}),{data:S}=d({queryKey:["/api/email-balance",s,n],queryFn:async()=>{const a=new URLSearchParams;return s&&a.append("propertyId",s),n&&a.append("landlordId",n),await(await u("GET",`/api/email-balance${a.toString()?`?${a}`:""}`)).json()}}),{data:c=[]}=d({queryKey:["/api/credit-usage",s,n],queryFn:async()=>{const a=new URLSearchParams;return s&&a.append("propertyId",s),n&&a.append("landlordId",n),await(await u("GET",`/api/credit-usage${a.toString()?`?${a}`:""}`)).json()}});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Credit Usage"}),e.jsx("p",{className:"text-muted-foreground",children:"SMS and email balances with consumption history"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(o,{className:`border ${t.border} ${t.card}`,children:[e.jsxs(x,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx($,{className:`h-4 w-4 ${t.icon}`}),"SMS Balance"]}),e.jsx(m,{children:"Live balance from SMS provider"})]}),e.jsx(f,{variant:"outline",children:"KES"})]}),e.jsx(j,{children:e.jsx("div",{className:`text-2xl font-semibold ${t.accentText}`,children:g?.balance??0})})]}),e.jsxs(o,{className:`border ${i.border} ${i.card}`,children:[e.jsxs(x,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(w,{className:`h-4 w-4 ${i.icon}`}),"Email Balance"]}),e.jsx(m,{children:"Internal email credits"})]}),e.jsx(f,{variant:"outline",children:"Units"})]}),e.jsx(j,{children:e.jsx("div",{className:`text-2xl font-semibold ${i.accentText}`,children:S?.balance??0})})]})]}),e.jsxs(o,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"Usage History"}),e.jsx(m,{children:"Latest SMS and email consumption"})]}),e.jsx(j,{children:e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs(p,{children:[e.jsx(l,{children:"Channel"}),e.jsx(l,{children:"Units"}),e.jsx(l,{children:"Balance After"}),e.jsx(l,{children:"Date"})]})}),e.jsx(v,{children:Array.isArray(c)&&c.length>0?c.map(a=>e.jsxs(p,{children:[e.jsx(r,{className:"capitalize",children:a.channel}),e.jsx(r,{children:a.units}),e.jsx(r,{children:a.balance_after??"—"}),e.jsx(r,{children:a.created_at?new Date(a.created_at).toLocaleString():"—"})]},a.id)):e.jsx(p,{children:e.jsx(r,{colSpan:4,className:"text-center text-muted-foreground",children:"No usage recorded yet."})})})]})})]})]})}export{B as CreditUsage};
