import{N as i,O as t,P as u,S as e,T as l,U as a,V as r,W as d,X as s}from"./vendor-Dl_IvdXv.js";const m=i("users",{id:t("id").primaryKey().default(u`gen_random_uuid()`),username:e("username").notNull().unique(),password:e("password").notNull(),fullName:e("full_name"),phone:e("phone"),idNumber:e("id_number"),role:e("role").notNull().default("admin"),mustChangePassword:l("must_change_password").notNull().default(1),createdAt:a("created_at").defaultNow()}),o=i("properties",{id:t("id").primaryKey().default(u`gen_random_uuid()`),name:e("name").notNull(),address:e("address").notNull(),landlordName:e("landlord_name").notNull(),landlordPhone:e("landlord_phone"),landlordEmail:e("landlord_email"),status:e("status").notNull().default("active"),createdAt:a("created_at").defaultNow()}),p=i("house_types",{id:t("id").primaryKey().default(u`gen_random_uuid()`),propertyId:t("property_id").notNull().references(()=>o.id),name:e("name").notNull(),description:e("description"),baseRentAmount:r("base_rent_amount",{precision:12,scale:2}).notNull(),rentDepositAmount:r("rent_deposit_amount",{precision:12,scale:2}).notNull().default("0.00"),waterRatePerUnit:r("water_rate_per_unit",{precision:8,scale:2}).notNull().default("15.50"),waterRateType:e("water_rate_type").notNull().default("unit_based"),waterFlatRate:r("water_flat_rate",{precision:8,scale:2}).notNull().default("0.00"),chargeAmounts:e("charge_amounts"),isActive:e("is_active").notNull().default("true"),createdAt:a("created_at").defaultNow()}),h=i("charge_codes",{id:t("id").primaryKey().default(u`gen_random_uuid()`),propertyId:t("property_id").notNull().references(()=>o.id),name:e("name").notNull(),description:e("description"),isActive:e("is_active").notNull().default("true"),createdAt:a("created_at").defaultNow()}),_=i("units",{id:t("id").primaryKey().default(u`gen_random_uuid()`),propertyId:t("property_id").notNull().references(()=>o.id),houseTypeId:t("house_type_id").notNull().references(()=>p.id),unitNumber:e("unit_number").notNull(),rentAmount:r("rent_amount",{precision:12,scale:2}).notNull(),rentDepositAmount:r("rent_deposit_amount",{precision:12,scale:2}).notNull().default("0.00"),waterRateAmount:r("water_rate_amount",{precision:12,scale:2}).notNull().default("0.00"),chargeAmounts:e("charge_amounts"),status:e("status").notNull().default("vacant"),createdAt:a("created_at").defaultNow()}),c=i("tenants",{id:t("id").primaryKey().default(u`gen_random_uuid()`),fullName:e("full_name").notNull(),email:e("email").notNull().unique(),phone:e("phone").notNull(),idNumber:e("id_number").notNull().unique(),emergencyContact:e("emergency_contact"),emergencyPhone:e("emergency_phone"),createdAt:a("created_at").defaultNow()}),N=i("leases",{id:t("id").primaryKey().default(u`gen_random_uuid()`),unitId:t("unit_id").notNull().references(()=>_.id),tenantId:t("tenant_id").notNull().references(()=>c.id),startDate:d("start_date").notNull(),endDate:d("end_date").notNull(),rentAmount:r("rent_amount",{precision:12,scale:2}).notNull(),depositAmount:r("deposit_amount",{precision:12,scale:2}).notNull(),waterRatePerUnit:r("water_rate_per_unit",{precision:8,scale:2}).notNull().default("15.50"),status:e("status").notNull().default("active"),createdAt:a("created_at").defaultNow()}),f=i("invoices",{id:t("id").primaryKey().default(u`gen_random_uuid()`),leaseId:t("lease_id").notNull().references(()=>N.id),invoiceNumber:e("invoice_number").notNull().unique(),description:e("description").notNull(),amount:r("amount",{precision:12,scale:2}).notNull(),dueDate:d("due_date").notNull(),issueDate:d("issue_date").notNull(),status:e("status").notNull().default("draft"),createdAt:a("created_at").defaultNow()}),b=i("invoice_items",{id:t("id").primaryKey().default(u`gen_random_uuid()`),invoiceId:t("invoice_id").notNull().references(()=>f.id),chargeCode:e("charge_code").notNull(),description:e("description").notNull(),quantity:r("quantity",{precision:10,scale:2}).notNull().default("1"),unitPrice:r("unit_price",{precision:12,scale:2}).notNull(),amount:r("amount",{precision:12,scale:2}).notNull(),createdAt:a("created_at").defaultNow()}),w=i("water_readings",{id:t("id").primaryKey().default(u`gen_random_uuid()`),unitId:t("unit_id").notNull().references(()=>_.id),readingDate:d("reading_date").notNull(),previousReading:r("previous_reading",{precision:10,scale:2}),currentReading:r("current_reading",{precision:10,scale:2}).notNull(),consumption:r("consumption",{precision:10,scale:2}).notNull(),ratePerUnit:r("rate_per_unit",{precision:8,scale:2}).notNull(),totalAmount:r("total_amount",{precision:12,scale:2}).notNull(),status:e("status").notNull().default("pending"),notes:e("notes"),lastModifiedAt:a("last_modified_at").defaultNow(),createdAt:a("created_at").defaultNow()}),v=i("payments",{id:t("id").primaryKey().default(u`gen_random_uuid()`),leaseId:t("lease_id").notNull().references(()=>N.id),invoiceId:t("invoice_id").references(()=>f.id),amount:r("amount",{precision:12,scale:2}).notNull(),paymentDate:d("payment_date").notNull(),paymentMethod:e("payment_method").notNull(),reference:e("reference"),notes:e("notes"),createdAt:a("created_at").defaultNow()}),y=i("bulk_messages",{id:t("id").primaryKey().default(u`gen_random_uuid()`),messageType:e("message_type").notNull(),subject:e("subject"),content:e("content").notNull(),totalRecipients:l("total_recipients").notNull(),sentAt:a("sent_at").defaultNow(),createdAt:a("created_at").defaultNow()}),I=i("message_recipients",{id:t("id").primaryKey().default(u`gen_random_uuid()`),bulkMessageId:t("bulk_message_id").references(()=>y.id),tenantId:t("tenant_id").references(()=>c.id),channel:e("channel").notNull(),recipientContact:e("recipient_contact").notNull(),status:e("status").notNull().default("pending"),sentAt:a("sent_at"),deliveredAt:a("delivered_at"),errorMessage:e("error_message"),messageCategory:e("message_category").notNull().default("manual"),recipientType:e("recipient_type").notNull().default("tenant"),recipientName:e("recipient_name"),subject:e("subject"),content:e("content"),propertyId:t("property_id").references(()=>o.id),externalMessageId:t("external_message_id"),deliveryStatus:e("delivery_status"),deliveryTimestamp:a("delivery_timestamp"),senderShortcode:e("sender_shortcode"),sentByUserId:t("sent_by_user_id").references(()=>m.id),createdAt:a("created_at").defaultNow()});i("message_templates",{id:t("id").primaryKey().default(u`gen_random_uuid()`),name:e("name").notNull(),channel:e("channel").notNull(),subject:e("subject"),content:e("content").notNull(),isSystem:l("is_system").notNull().default(0),createdAt:a("created_at").defaultNow(),updatedAt:a("updated_at").defaultNow()});i("activity_logs",{id:t("id").primaryKey().default(u`gen_random_uuid()`),action:e("action").notNull(),details:e("details"),type:e("type").notNull(),status:e("status").notNull().default("success"),userId:t("user_id").references(()=>m.id),propertyId:t("property_id").references(()=>o.id),createdAt:a("created_at").defaultNow()});const R=i("property_sms_settings",{id:t("id").primaryKey().default(u`gen_random_uuid()`),propertyId:t("property_id").notNull().unique().references(()=>o.id),apiUrl:e("api_url").notNull().default("https://quicksms.advantasms.com/api/services/sendsms/"),apiKey:e("api_key"),partnerId:e("partner_id"),shortcode:e("shortcode"),enabled:l("enabled").notNull().default(0),createdAt:a("created_at").defaultNow(),updatedAt:a("updated_at").defaultNow()}),K=i("messages",{id:t("id").primaryKey().default(u`gen_random_uuid()`),tenantId:t("tenant_id").references(()=>c.id),propertyId:t("property_id").references(()=>o.id),channel:e("channel").notNull(),subject:e("subject"),content:e("content").notNull(),direction:e("direction").notNull(),status:e("status").notNull().default("sent"),sentAt:a("sent_at").defaultNow()});s(m).omit({id:!0});const D=s(o).omit({id:!0,createdAt:!0}),g=s(p).omit({id:!0,createdAt:!0});g.refine(n=>n.name&&n.name.trim().length>0,{message:"House type name is required",path:["name"]}).refine(n=>n.baseRentAmount&&parseFloat(n.baseRentAmount)>0,{message:"Base rent amount must be greater than 0",path:["baseRentAmount"]}).refine(n=>n.rentDepositAmount&&parseFloat(n.rentDepositAmount)>=0,{message:"Rent deposit amount is required and must be 0 or greater",path:["rentDepositAmount"]});const S=s(p).omit({id:!0,createdAt:!0,propertyId:!0}).refine(n=>n.name&&n.name.trim().length>0,{message:"House type name is required",path:["name"]}).refine(n=>n.baseRentAmount&&parseFloat(n.baseRentAmount)>0,{message:"Base rent amount must be greater than 0",path:["baseRentAmount"]}).refine(n=>n.rentDepositAmount&&parseFloat(n.rentDepositAmount)>=0,{message:"Rent deposit amount is required and must be 0 or greater",path:["rentDepositAmount"]});g.partial();s(_).omit({id:!0,createdAt:!0});const C=s(c).omit({id:!0,createdAt:!0}),T=s(N).omit({id:!0,createdAt:!0});s(f).omit({id:!0,createdAt:!0});s(v).omit({id:!0,createdAt:!0});s(y).omit({id:!0,sentAt:!0,createdAt:!0});s(I).omit({id:!0,sentAt:!0,deliveredAt:!0,createdAt:!0});s(R).omit({id:!0,createdAt:!0,updatedAt:!0});s(K).omit({id:!0,sentAt:!0});s(b).omit({id:!0,createdAt:!0,amount:!0});s(w).omit({id:!0,createdAt:!0,lastModifiedAt:!0,consumption:!0,totalAmount:!0,ratePerUnit:!0,previousReading:!0});const A=s(h).omit({id:!0,createdAt:!0}),P=A.refine(n=>n.name&&n.name.trim().length>0,{message:"Charge code name is required",path:["name"]});A.partial();export{P as a,T as b,C as c,S as h,D as i};
